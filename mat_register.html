<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>DrsAI - Wi-Fi 설정</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@100;200;300;400;500;600;700;800;900&display=swap');

    @keyframes bounceDot {
      0%, 80%, 100% { transform: translateY(0); opacity: .55; }
      40% { transform: translateY(-6px); opacity: 1; }
    }
    @keyframes pulseSoft {
      0%, 100% { opacity: .65; }
      50% { opacity: 1; }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes glowPulse {
      0%, 100% { box-shadow: 0 0 15px rgba(255, 140, 66, 0.1); transform: scale(1); }
      50% { box-shadow: 0 0 30px rgba(255, 140, 66, 0.2); transform: scale(1.03); }
    }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { pretendard: ["Pretendard", "ui-sans-serif", "system-ui"] },
          colors: {
            bg: "#121212",
            surface: "#1E1E1E",
            primary: "#FF8C42",
            on: "#FFFFFF",
            muted: "#9CA3AF"
          },
          boxShadow: {
            input: "inset 0 2px 4px rgba(0,0,0,0.2)"
          }
        }
      }
    }
  </script>
</head>
<body class="bg-bg text-on font-pretendard h-[100dvh] flex flex-col overflow-hidden relative">

  <div class="absolute top-0 left-0 right-0 h-[30vh] bg-gradient-to-b from-primary/5 to-transparent pointer-events-none z-0"></div>

  <header class="relative z-20 shrink-0 px-6 pt-[calc(1rem+env(safe-area-inset-top))] h-[60px] flex items-center justify-between">
    <button id="header-back-btn" class="w-10 h-10 -ml-2 inline-flex items-center justify-center rounded-full text-white/70 hover:bg-white/10 transition" onclick="location.href='/register_information.html'">
      <iconify-icon icon="lucide:chevron-left" width="26"></iconify-icon>
    </button>
    
    <div id="step-indicator" class="flex flex-col items-center gap-1 transition-opacity duration-300">
      <span class="text-[12px] font-bold text-primary tracking-widest uppercase">Step 4 of 4</span>
      <div class="flex gap-1">
        <div class="w-2 h-1 rounded-full bg-primary/40"></div>
        <div class="w-2 h-1 rounded-full bg-primary/40"></div>
        <div class="w-2 h-1 rounded-full bg-primary/40"></div>
        <div class="w-8 h-1 rounded-full bg-primary"></div> 
      </div>
    </div>

    <button class="w-10 h-10 -mr-2 inline-flex items-center justify-center rounded-full text-white/70 hover:bg-white/10 transition">
      <iconify-icon icon="lucide:help-circle" width="24"></iconify-icon>
    </button>
  </header>

  <main class="relative z-10 flex-1 flex flex-col px-6 pt-4 pb-0 w-full overflow-hidden">
    
    <div id="input-content" class="transition-opacity duration-300 flex-1 flex flex-col w-full">
      <section class="mb-6 animate-[fadeIn_0.5s_ease-out]">
        <h1 class="text-[28px] font-bold leading-tight mb-2">
          Wi-Fi를<br>
          <span class="text-primary">연결해 주세요</span>
        </h1>
        <p class="text-[15px] text-muted leading-snug">
          안정적인 서비스 사용을 위해 네트워크가 필요합니다.
        </p>
      </section>

      <section class="mb-6 animate-[fadeIn_0.7s_ease-out]">
          <div class="rounded-2xl bg-white/5 border border-white/10 p-4 flex gap-3 items-start">
              <div class="shrink-0 w-6 h-6 mt-0.5 rounded-full bg-primary/20 flex items-center justify-center text-primary">
                  <iconify-icon icon="lucide:info" width="16"></iconify-icon>
              </div>
              <div>
                  <p class="text-[15px] text-white/90 font-semibold">2.4GHz Wi-Fi만 지원합니다.</p>
                  <p class="text-[13px] text-white/60 mt-1 leading-snug">5GHz 대역은 지원하지 않으니, 공유기 설정을 확인해 주세요.</p>
              </div>
          </div>
      </section>

      <form class="space-y-5 animate-[fadeIn_0.9s_ease-out]">
          <div class="space-y-2">
              <label class="text-[14px] font-bold text-white/70 ml-1">네트워크 이름 (SSID)</label>
              <div class="relative group cursor-pointer">
                  <div class="w-full h-[56px] rounded-2xl bg-[#1E1E1E] border border-white/10 flex items-center px-4 hover:border-primary/50 transition-colors shadow-input">
                      <iconify-icon icon="lucide:wifi" class="text-white/40 text-[22px] mr-3"></iconify-icon>
                      <input type="text" readonly value="U+Net_2.4G" class="flex-1 bg-transparent text-[16px] text-white font-medium outline-none cursor-pointer placeholder:text-white/20" placeholder="Wi-Fi를 선택하세요">
                      <iconify-icon icon="lucide:chevron-down" class="text-white/40 text-[22px] ml-2"></iconify-icon>
                  </div>
              </div>
          </div>

          <div class="space-y-2">
              <label class="text-[14px] font-bold text-white/70 ml-1">비밀번호</label>
              <div class="relative group">
                  <div class="w-full h-[56px] rounded-2xl bg-[#1E1E1E] border border-white/10 flex items-center px-4 focus-within:border-primary/50 focus-within:ring-1 focus-within:ring-primary/50 transition-all shadow-input">
                      <iconify-icon icon="lucide:lock" class="text-white/40 text-[22px] mr-3 group-focus-within:text-primary transition-colors"></iconify-icon>
                      <input type="password" placeholder="비밀번호 입력" class="flex-1 bg-transparent text-[16px] text-white placeholder:text-white/20 outline-none h-full">
                      <button type="button" class="p-2 -mr-2 text-white/30 h-[40px] hover:text-white transition-colors">
                          <iconify-icon icon="lucide:eye" class="text-[22px]"></iconify-icon>
                      </button>
                  </div>
              </div>
          </div>
      </form>
    </div>

    <div id="loading-content" class="hidden h-full flex-col items-center justify-center animate-[fadeIn_0.5s_ease-out] -mt-10">
      <div class="flex items-center justify-center" aria-label="로딩 중">
          <div class="flex items-center gap-3">
          <span class="h-3.5 w-3.5 rounded-full bg-primary shadow-[0_0_15px_rgba(255,140,66,0.6)]" style="animation: bounceDot 1s infinite; animation-delay: 0ms;"></span>
          <span class="h-3.5 w-3.5 rounded-full bg-primary shadow-[0_0_15px_rgba(255,140,66,0.6)]" style="animation: bounceDot 1s infinite; animation-delay: 150ms;"></span>
          <span class="h-3.5 w-3.5 rounded-full bg-primary shadow-[0_0_15px_rgba(255,140,66,0.6)]" style="animation: bounceDot 1s infinite; animation-delay: 300ms;"></span>
          </div>
      </div>
      <div class="h-8"></div>
      <div class="text-center" style="animation: pulseSoft 2s ease-in-out infinite;">
        <h3 class="text-[20px] font-bold text-white mb-2">기기를 연결하고 있습니다</h3>
        <p class="text-[15px] text-muted font-normal">잠시만 기다려주세요</p>
      </div>
    </div>

    <div id="wearable-content" class="hidden h-full flex-col animate-[fadeIn_0.5s_ease-out]">
        
        <div class="flex flex-col items-center justify-center flex-1 min-h-0">
            <div class="text-center mb-6 shrink-0">
                <h1 class="text-[26px] font-bold leading-tight mb-3">
                    스마트 워치를<br>
                    <span class="text-primary">사용 중이신가요?</span>
                </h1>
                <p class="text-[15px] text-muted leading-relaxed">
                    수면 데이터를 분석해<br>최적의 온도를 자동으로 조절해 드려요.
                </p>
            </div>

            <div class="relative w-32 h-32 flex items-center justify-center shrink-0 mb-6">
                <div class="absolute inset-0 rounded-full bg-primary/10 blur-xl animate-[pulseSoft_3s_infinite]"></div>
                <div class="relative w-24 h-24 rounded-[28px] bg-gradient-to-br from-[#2A2A2A] to-[#1E1E1E] border border-white/10 shadow-lg flex items-center justify-center" style="animation: glowPulse 3s infinite ease-in-out;">
                    <iconify-icon icon="lucide:watch" class="text-[48px] text-white/90 drop-shadow-lg"></iconify-icon>
                    <div class="absolute -top-1.5 -right-1.5 w-7 h-7 rounded-full bg-primary flex items-center justify-center shadow-md border-2 border-[#121212]">
                        <iconify-icon icon="lucide:sparkles" class="text-[14px] text-[#121212]"></iconify-icon>
                    </div>
                </div>
            </div>

            <div class="w-full space-y-3">
                <div class="flex items-center gap-4 p-3.5 rounded-2xl bg-[#1E1E1E] border border-white/5">
                    <div class="shrink-0 w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary">
                        <iconify-icon icon="lucide:line-chart" width="20"></iconify-icon>
                    </div>
                    <div class="min-w-0">
                        <h3 class="text-[15px] font-semibold text-white truncate">정밀한 수면 분석</h3>
                        <p class="text-[13px] text-white/50 mt-0.5 truncate">수면 단계(REM, 깊은 잠)별 체온 추적</p>
                    </div>
                </div>

                <div class="flex items-center gap-4 p-3.5 rounded-2xl bg-[#1E1E1E] border border-white/5">
                    <div class="shrink-0 w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary">
                        <iconify-icon icon="lucide:thermometer-sun" width="20"></iconify-icon>
                    </div>
                    <div class="min-w-0">
                        <h3 class="text-[15px] font-semibold text-white truncate">AI 온도 자동 조절</h3>
                        <p class="text-[13px] text-white/50 mt-0.5 truncate">분석된 데이터를 기반으로 최적 온도 설정</p>
                    </div>
                </div>

                <div class="flex items-center gap-4 p-3.5 rounded-2xl bg-[#1E1E1E] border border-white/5">
                    <div class="shrink-0 w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary">
                        <iconify-icon icon="lucide:moon-star" width="20"></iconify-icon>
                    </div>
                    <div class="min-w-0">
                        <h3 class="text-[15px] font-semibold text-white truncate">최상의 수면 품질</h3>
                        <p class="text-[13px] text-white/50 mt-0.5 truncate">깨지 않고 푹 잘 수 있는 환경 조성</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

  </main>

  <footer id="action-footer" class="relative z-20 w-full px-6 pb-[calc(2rem+env(safe-area-inset-bottom))] bg-bg pt-3 shrink-0 transition-all duration-300">
    
    <button id="connect-btn" type="button" class="w-full h-[56px] rounded-2xl bg-primary text-[#121212] text-[16px] font-bold shadow-[0_4px_20px_rgba(255,140,66,0.3)] hover:brightness-110 active:scale-[0.98] transition-all">
      연결하기
    </button>

    <div id="wearable-btns" class="hidden gap-3 w-full">
        <button id="skip-wearable-btn" type="button" class="flex-1 h-[56px] rounded-2xl bg-[#1E1E1E] border border-white/10 text-white/60 text-[16px] font-semibold hover:bg-white/5 active:scale-[0.98] transition-all">
            나중에
        </button>
        <button id="use-wearable-btn" type="button" class="flex-[2] h-[56px] rounded-2xl bg-primary text-[#121212] text-[16px] font-bold shadow-[0_4px_20px_rgba(255,140,66,0.3)] hover:brightness-110 active:scale-[0.98] transition-all">
            사용하기
        </button>
    </div>

  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Elements
      const stepIndicator = document.getElementById('step-indicator');
      const inputContent = document.getElementById('input-content');
      const loadingContent = document.getElementById('loading-content');
      const wearableContent = document.getElementById('wearable-content');
      const connectBtn = document.getElementById('connect-btn');
      const wearableBtns = document.getElementById('wearable-btns');
      
      // 1. Click "Connect"
      connectBtn.addEventListener('click', () => {
        // Hide Input & Button
        inputContent.style.opacity = '0';
        connectBtn.style.opacity = '0';
        connectBtn.style.pointerEvents = 'none';

        setTimeout(() => {
          inputContent.classList.add('hidden');
          connectBtn.classList.add('hidden');
          
          // Show Loading
          loadingContent.classList.remove('hidden');
          loadingContent.classList.add('flex');
          
          // Hide Step Indicator for clean look during loading/wearable
          stepIndicator.style.opacity = '0';

          // 2. Wait 3 seconds -> Show Wearable Screen
          setTimeout(() => {
             loadingContent.classList.remove('flex');
             loadingContent.classList.add('hidden');

             wearableContent.classList.remove('hidden');
             wearableContent.classList.add('flex'); 
             
             wearableBtns.classList.remove('hidden');
             wearableBtns.classList.add('flex');
             
          }, 3000); 

        }, 300);
      });

      // 3. Navigation
      const goToSuccess = () => {
         window.location.href = "mat_register_success.html";
      };

      document.getElementById('use-wearable-btn').addEventListener('click', goToSuccess);
      document.getElementById('skip-wearable-btn').addEventListener('click', goToSuccess);
    });
  </script>

</body>
</html>